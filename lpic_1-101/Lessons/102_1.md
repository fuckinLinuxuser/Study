  102.1   Разбиение жесткого диска

Студент должен уметь разбивать жесткий диск на разделы согласно требованиям Linux.

  Изучаем   :

- расположение файловых систем на разных разделах;
- создание разделов на диске;
- требования к разделу /boot;
- основные возможности LVM.

  Термины и утилиты:            

- / (корень файловой системы)
- /var
- /home
- /boot
- раздел подкачки
- точки монтирования
- разделы

При включении ПК инициализируется ПО материнской платы, которое после всех проверок передает управление первым секторам основного жесткого диска. В этих секторах находятся файлы загрузчика – специального ПО, позволяющего загрузить ядро ОС в оперативную память.

Традиционно в Linux существует единственный корень всей файловой системы (верхняя точка дерева каталогов, обозначаемая символом &quot;/&quot;), а все дополнительные разделы с различных жестких дисков (в том числе сетевые папки, флешки и т.д.) подключаются в ее пустые (можно монтировать и в каталоги с данными «поверх» них) каталоги (точки монтирования).

В случае наличия большого количества носителей (или исходя из требований системы) традиционно можно выделить отдельные разделы жесткого диска под следующие каталоги (в современном мире виртуалок отдельно монтируются директории с данными, а все остальное лежит на едином виртуальном диске):

-   /             _– корневая файловая система, самый большой раздел;_
-   /boot   _        – загрузочный раздел;_
-   /home   _        – домашние папки;_
-   /root   _        – домашняя папка суперпользователя;_
-   /etc           _– конфигурация системы и ее компонентов;_
-   /opt/   _        – папка для ПО от третьих поставщиков;_
-   /var           _– часто изменяемые данные;_
-   /usr           _– все установленные пакеты программ, документация, исходный код ядра;_
-   /tmp        – временные файлы;_
-   swap           – раздел подкачки, никуда не монтируется._

Отдельно внимание уделяется каталогу /boot, часто монтируемому как отдельный раздел жесткого диска. На нем находятся следующие файлы:

-   abi     -        функции и библиотеки, через которые к ядру обращаются приложения;
-   config     -      файл параметров, при которых создано текущее ядро;
-   initrd     img     образ стартовой корневой системы, загружающийся в ОЗУ;
-   memtest             файлы ПО проверки ОЗУ;
-   system         map              карта аппаратных адресов системы;
-   vmlinuz                         образ ядра системы.

На каждом жестком диске можно создать не более четырех разделов. Если вдруг потребуется больше разделов, то вместо основного раздела создается расширенный, который в свою очередь может содержать не более четырех логических разделов.

Жесткие диски именуются по порядку подключения:   sda     ,      sdb     ,      sdc   и т.д.

Разделы на каждом жестком диске нумеруются по порядку:   sda     1,      sda     2   и т.д. При этом первые четыре цифры зарезервированы под основные и расширенные разделы, поэтому нумерация логических разделов начинается с пяти.


Для создания, изменения, удаления и прочих действий с разделами используется утилита   fdisk   , которая в интерактивном режиме позволяет управлять разбиением жесткого диска _(будет подробно изучена в дальнейших уроках)_.
![[Pasted image 20250610142651.png]]
Для создания файловой системы на разделах используется утилита  mkfs  _(будет подробно изучена в дальнейших уроках)_.

Подключать созданные разделы можно как вручную при помощи команды   mount     имя\_раздела пустой\_каталог   , так и автоматически с использованием файла настроек   /     etc     /     fstab   _(действия будут подробно изучены в дальнейших уроках)._

Раздел подкачки (   swap   ) создается на жестком диске для временного хранения на нем данных, для которых не хватает места в оперативной памяти. Для форматирования раздела как раздела подкачки используется команда   mkswap   _(действия будут подробно изучены в дальнейших уроках)_.

В современных дистрибутивах Linux вместо классических разделов зачастую используются логические тома (раздел – часть диска, а том может располагаться на нескольких дисках одновременно), как более гибкий и надежный способ разбиения дискового пространства. Для этой цели используется LVM – менеджер логических томов.

При работе с LVM используются следующие понятия:

- физический носитель – жесткий диск (/dev/sda);
- физический том (PV) – носитель с некой системной инфой, которую понимает LVM;
- физическое пространство (PE – physical extent) – блоки дискового пространства;
- группа томов (VG) – набор PE;
- логический том – результирующее разбиение VG;



Для управления LVM доступен отдельный набор инструментов, например:

  p     vdisplay  _                        (отобразить физические тома);_

  pvcreate      /     dev     /     sdb     2   _        (создать физический том / __dev__ / __sdb__ 2);_

  vgcreate     vg     5 /     dev     /     sdb     1 /     dev     /     sdb     2   _  (создать группу томов_ _vg__5 из двух физических томов);_

  lvcreate      -     n     lv     2 -     L      30     G     vg     1  _        (создать в группе_ _vg __1 логический том_ _lv__ 2 размером 30 Гб);_

  lvresize      -     L      40     G     vg     1/     lv     2   _        (изменить размер тома_ _lv __2 в группе_ _vg__ 1 до 40 Гб)._