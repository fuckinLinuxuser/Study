### #Рома
---

###    Операционная система 
Это комплекс программ для возможности рационального использования оборудования и другого программного обеспечения удобным для пользователя образом

Операционные системы призваны упростить управление ресурсами компьютера разработку прикладного ПО и работу конечных пользователей

---
###    Структура вычислительной системы

- В понятие вычислительной системы включают:
	- **Hardware**: процессор, память, монитор, диск, обьединенные шиной

	- **Software**: прикладные средства, бизнес-программы, игры, текстовые процессоры

---

###    Техническое обеспечение ВС

-  **Основная память** используется для запоминания программ и данных в двоичном виде
и организована в виде упорядоченного массива ячеек, каждая из которых имеет
уникальный цифровой адрес. Типовые операции над основной памятью - считывание и
запись содержимого ячейки с определенным адресом.

-  Выполнение различных операций с данными осуществляется изолированной частью
компьютера, называемой центральным процессором (ЦП). ЦП также имеет ячейки
для запоминания информации, называемые регистрами. Их разделяют на регистры
общего назначения и специализированные регистры. В современных компьютерах
емкость регистра обычно составляет 4-8 байт. Регистры общего назначения
используются для временного хранения данных и результатов операций. Для
обработки информации обычно организовывается передача данных из ячеек памяти в
регистры общего назначения, выполнение операции центральным процессором и
передача результатов операции в основную память.

-  Специализированные регистры используются для контроля работы процессора.
Наиболее важными являются: программный счетчик, регистр команд и регистр,
содержащий информацию о состоянии программы.

---


-  Периферийные устройства предназначены для ввода и вывода информации.
Каждое устройство обычно имеет в своем составе специализированный компьютер,
называемый контроллером или адаптером. Когда контроллер вставляется в разьем
на материнской плате, он подключается к шине и получает уникальный номер
(адрес). После этого контроллер осуществляет наблюдение за сигналами, идущими
по шине, и отвечает на сигналы, адресованные ему.

-  Любая операция ввода-вывода предполагает диалог между ЦП и контроллером
устройства. Когда процессору встречается команда, связанная с вводом-выводом,
входящая в состав какой-либо программы, он выполняет ее, посылая сигналы
контроллеру устройства. Это так называемый программируемый ввод-вывод.

---

-  Программы хранятся в виде последовательности машинных команд, которые
должен выполнять центральный процессор. Каждая команда состоит из поля
операции и полей операндов, то есть тех данных, над которыми выполняется
данная операция. Весь набор машинных команд называется машинным языком.

**Выполнение программы осуществляется следующим образом:**
-  Машинная команда, на которую указывает программный счетчик,
считывается из памяти и копируется в регистр команд!
-  Она декодируется, после чего исполняется.
-   После выполнения команды программный счетчик указывает на следующую
команду!
-  Эти действия, называемые **машинным циклом**, затем повторяются.

---
###    Основные функциональные задачи ОС

Операционные системы как часть системного программного обеспечения выполняется ряд важных задач:

- Организация программного интерфейса 
- Организация программно-аппаратного взаимодействия
- Организация пользовательского интерфейса
- Организация межмашинного взаимодействия 

---
###    ОС как виртуальная машина

-  При разработке ОС широко применяется абстрагирование, которое является
важным методом упрощения и позволяет сконцентрироваться на
взаимодействии высокоуровневых компонентов системы, игнорируя детали их
реализации. В этом смысле ОС представляет собой интерфейс между
пользователем и компьютером.

-  Архитектура большинства компьютеров на уровне машинных команд очень
неудобна для использования прикладными программами.

-  Например, работа с диском предполагает знание внутреннего устройства его
электронного компонента - контроллера для ввода команд вращения диска,
поиска и форматирования дорожек, чтения и записи секторов и т. д.

 -  Современные вычислительные комплексы можно создать иллюзию
неограниченного размера операционной памяти и числа процессоров.

 -  Таким образом, операционная система представляется пользователю
виртуальной машиной, с которой проще иметь дело, чем непосредственно с
оборудованием компьютера.

---
###    ОС как менеджер ресурсов 

-  Операционная система предназначена для управления всеми частями сложной архитектуры компьютера 

-  ОС предотвращает такого рода хаос за счет буферизации информации, предназначенной для печати, на диске и организации очереди на печать

-  ОС как менеджер ресурсов осуществляет упорядоченное и контролируемое распределение процессоров, памяти и других ресурсов между различными программами

---

### ОС как постоянно функц. ядро

-  ОС - это программа постоянно работающая на компьютере и взаимодействующая со всеми прикладными программами

-  Во многих современных ОС постоянно работает на компьютере лишь часть ОС которую принято называть ее ядром. 

---


###    Краткая эволюция ВС




- [?] НАЙТИ И ДОДЕЛАТЬ




---

## Основные понятия, концепции ОС, 10.09.25
### #Рома

---
### Основные понятия
#### Прерывания
- Прерывание - это событие генерируемое внешним устройством. Посредством аппаратных прерываний аппаратура либо информирует центральный процессор о том, что произошло какое-либо событие, требующее немедленной реакции, либо сообщает о завершении 
- Важный тип аппаратных прерываний - прерывания таймера, которые генерируются периодически через фиксированный промежуток времени. Прерывания таймера используются операционной системой при планировании процессов
﻿﻿- Каждый тип аппаратных прерываний имеет собственный номер, однозначно определяющий источник прерывания
﻿- ﻿Аппаратное прерывание - это асинхронное событие, то есть оно возникает вне зависимости от того, какой код исполняется процессором в данный момент. Обработка аппаратного прерывания не должна учитывать, какой процесс является текущим.

#### Системные вызовы
- В любой операционной системе поддерживается механизм, который позволяет пользовательским программам обращаться к услугам ядра ОС
- **Системные вызовы** (system calls) - это интерфейс между операционной системой и пользовательской программой. Они создают, удаляют и используют различные объекты, главные из которых- процессы и файлы. Пользовательская программа запрашивает сервис у операционной системы, осуществляя системный вызов.
- Имеются библиотеки процедур, которые загружают машинные регистры определенными параметрами и осуществляют прерывание процессора, после чего управление передается обработчику данного вызова, входящему в ядро операционной системы. Цель таких библиотек - сделать системный вызов похожим на обычный вызов подпрограммы.
﻿﻿- Основное отличие состоит в том, что при системном вызова задач переходит в привилегированный режим или режим ядра (kernel mode). Поэтому системные вызовы иногда еще называют программными прерываниями, в отличие от аппаратных прерываний, которые чаще называют просто прерываниями
﻿﻿- В этом режиме работает код ядра операционной системы, причем исполняется он в адресном пространстве и в контексте вызвавшей его задачи. Таким образом, ядро ОС имеет полный доступ к памяти пользовательской программы, и при системном вызове достаточно передать адреса одной или нескольких областей памяти с параметрами вызова и адреса одной или нескольких областей памяти для результата вызова.
﻿﻿- В большинстве ОС системный вызов осуществляется командой программного прерывания (INT). Таким образом программное прерывание - это синхронное событие

#### Исключительные ситуации
<<<<<<< HEAD
﻿﻿- **Исключительная ситуация (exception)**- событие, возникающее в результате попытки выполнения программой команды, которая по каким-то причинам не может быть выполнена до конца.
=======
﻿﻿- **Исключительная ситуация (exception)** - событие, возникающее в результате попытки выполнения программой команды, которая по каким-то причинам не может быть выполнена до конца.
>>>>>>> 1b888768bfa988e8d41057367e47513ed39a26e4
﻿﻿- Примерами таких команд могут быть попытки доступа к ресурсу при отсутствии достаточных привилегий или обращения к отсутствующей странице памяти.
﻿﻿- Исключительные ситуации, как и системные вызовы, являются синхронными событиями, возникающими в контексте текущей задачи.
﻿﻿- Исключительные ситуации можно разделить на исправимые и неисправимые
	﻿﻿- К исправимым относятся такие исключительные ситуации, как отсутствие нужной информации в оперативной памяти. После устранения причины исправимой исключительной ситуации программа может выполняться дальше. Возникновение в процессе работы операционной системы исправимых исключительных ситуаций считается нормальным явлением.
	- Неисправимые исключительные ситуации чаще всего возникают в результате ошибок в программах (например, деление на ноль). Обычно в таких случаях операционная система реагирует завершением программы, вызвавшей исключительную ситуацию.

#### Файлы
- Файлы предназначены для хранения информации на внешних носителях, то есть принято, что информация, записанная, например, на диске, должна находиться внутри Файла. Обычно под файлом понимают именованную часть пространства на носителе информации.
- Главная задача **файловой системы** (file system) - скрытие особенностей ввода-вывода и возможность дать программисту простую абстрактную модель файлов, независимых от устройств.
- Для чтения, создания, удаления, записи, открытия и закрытия файлов также имеется обширная категория системных вызовов (создание, удаление, открытие, закрытие, чтение и т.д.).
- Пользователям хорошо знакомы такие связанные с организацией файловой системы понятия, как каталог, текущий каталог, корневой каталог, путь. Для манипулирования этими объектами в операционной системе имеются системные вызовы.

#### Процессы:
﻿﻿- Понятие **процесса** характеризует некоторую совокупность набора исполняющихся команд. ассоциированных с ним ресурсов (выделенная для исполнения память или адресное пространство, стеки, используемые файлы и устройства ввода-вывода и т. д.) и текущего момента его выполнения (значения регистров, программного счетчика, состояние стека и значения переменных), находящуюся под управлением операционной системы.
﻿﻿- Не существует взаимно-однозначного соответствия между процессами и программами, обрабатываемыми вычислительными системами. Даже в случае обработки только одной программы в рамках одного процесса нельзя считать, что процесс представляет собой просто динамическое описание кода исполняемого файла, данных и выделенных для них ресурсов.
﻿﻿- Процесс находится под управлением операционной системы, поэтому в нем может выполняться часть кода ее ядра, как в случаях, специально запланированных авторами программы (например, при использовании системных вызовов), так и в непредусмотренных ситуациях (например, при обработке внешних прерываний).

#### Потоки
- Классический подход представляет собой выполнение процесса как единственный поток команд процессора. Однако в современных ОС возможно одновременное параллельное исполнение в одном процессе нескольких потоков команд, называемых нитями, или потоками (threads).
![[Pasted image 20250910184828.png]]

#### Шесть основных функций, которые выполняют классические ОС:
1. Планирование заданий и использования процессора.
2. Обеспечение программ средствами коммуникации и синхронизации.
3. Управление памятью.
4. Управление файловой системой.
5. Управление вводом-выводом.
6. Обеспечение безопасность
Каждая из функций обычно реализована в виде подсистемы, являющейся структурным компонентом ОС.

---
### Классификация ОС
<<<<<<< HEAD
#### По способу организации вычислений:
=======
#### *По способу организации вычислений:*
>>>>>>> 1b888768bfa988e8d41057367e47513ed39a26e4
- **системы пакетной обработки**(batch processing os) - целью является
выполнение максимального количества вычислительных задач за
единицу времени; при этом из нескольких задач формируется пакет,
который обрабатывается системой;
- **системы разделения времени** (time-sharing os) - целью является
возможность одновременного использования одного компьютера
несколькими пользователями; реализуется посредством
поочередного предоставления каждому пользователю интервала
процессорного времени;
- **системы реального времени**(real-time os) - целью является
заполнение каждой задачи за строго определённый для данной
задачи интервал времени.

<<<<<<< HEAD
#### По типу ядра:
=======
#### *По типу ядра:*
>>>>>>> 1b888768bfa988e8d41057367e47513ed39a26e4
- **системы с монолитным ядром** (monolithic os) - ==MS-DOS, Linux, FreeBSD;==
- **системы с микроядром** (microkernel os) - ==Mach, Symbian, MINIX 3;==
- **системы с гибридным ядром** (hybrid os) -==NetWare, Windows==.

В монолитном ядре реализуются все основные функции ОС, и оно является, по сути, единой программой, представляющей собой совокупность процедур. В микроядре остается лишь минимум функций, который должен быть реализован в привилегированном режиме: планирование потоков, обработка прерываний, межпроцессное взаимодействие. Остальные функции ОС по управлению приложениями, памятью, безопасностью и пр. реализуются в виде отдельных модулей в пользовательском режиме

<<<<<<< HEAD
#### По количеству одновременно выполняемых задач :
=======
#### *По количеству одновременно выполняемых задач :*
>>>>>>> 1b888768bfa988e8d41057367e47513ed39a26e4
- **многозадачные** (multitasking operating systems) - ==Unix,, Windows==
- **однозадачные** (single-tasking operating systems) -==MS-DOS.==

Многозадачная ОС, решая проблемы распределения ресурсов и конкуренции, полностью реализует мультипрограммный режим.
﻿﻿Многозадачный режим, который воплощает в себе идею разделения времени, называется вытесняющим (preemptive). Каждой программе выделяется квант процессорного времени, по истечении которого управление передается другой программе. Говорят, что первая программа будет вытеснена. В вытесняющем режиме работают пользовательские программы большинства коммерческих ОС
﻿﻿
﻿﻿В некоторых ОС (Windows 11, например) пользовательская программа может монополизировать процессор, то есть работает в невытесняющем режиме. Как правило, в большинстве систем не подлежит вытеснению код собственно ОС. Ответственные программы, в частности задачи реального времени, также не вытесняются. Более подробно об этом рассказано в лекции, посвященной планированию работы процессора.

<<<<<<< HEAD
#### По количеству одновременно работающих пользователей: 
﻿﻿- однопользовательские (single-user os) - ==MS-DOS, Windows 3.x==;
﻿﻿- многопользовательские (multi-user os) - ==Windows 2000 и выше, Unix.==

Наиболее существенное отличие заключается в наличии у многопользовательских систем механизмов защиты персональных данных каждого пользователя.
=======
#### *По количеству одновременно работающих пользователей:*
﻿﻿- однопользовательские (single-user os) - ==MS-DOS, Windows 3.x==;
﻿﻿- многопользовательские (multi-user os) - ==Windows 2000 и выше, Unix.==

Наиболее существенное отличие заключается в наличии у многопользовательских систем механизмов защиты персональных данных каждого пользователя.

#### *По количеству поддерживаемых процессоров:*
- **однопроцессорные** (uniprocessor os);
- **многопроцессорные** (multiprocessor os).
Поддержка мультипроцессирования является важным свойством ОС и приводит к усложнению всех алгоритмов управления ресурсами. Многопроцессорная обработка реализована в таких ОС, как Linux, Solaris, Windows NT и выше, и ряде других.

Многопроцессорные ОС разделяют на **симметричные** и **асимметричные**.
- В **симметричных** ОС на каждом процессоре функционирует одно и то же ядро, и задача может быть выполнена на любом процессоре, то есть обработка полностью децентрализована. При этом каждому из процессоров доступна вся память.
- В **асимметричных** ОС процессоры неравноправны. Обычно существует главный процессор (master) и подчиненные (slave), загрузку и характер работы которых определяет главный процессор.

#### *По роли в сетевом взаимодействии:*
﻿- **Серверные** (server os) - ОС, предоставляющие доступ к ресурсам сети и управляющие сетевой инфраструктурой; 
﻿- **Клиентские** (client os) - ОС, которые могут получать доступ к ресурсам сети.

Примером серверных ОС является линейка версий Windows Server, начиная с
Windows Server 2003, далее 2008, 2012, 2016 т.д.

#### *По типу лицензии:*
﻿﻿- **Открытые** (open-source os) - ОС с открытым исходным кодом, доступным для изучения и изменения;
﻿﻿- **Проприетарные** (proprietary os) -ОС, которые имеют конкретного правообладателя; обычно поставляются с закрытым исходным кодом.

Несколько самых популярных бесплатных лицензий на открытое ПО:
- GNU General Public© (GPL): GNU — гарантирует пользователям возможность запускать, изучать, модифицировать и обмениваться ПО.
- Apache®: Apache License 2.0 — позволяет использовать, модифицировать и распространять ПО с любой целью.
- MySQL™: MySQL — это открытая СУБД с двумя отдельными вариантами лицензирования: MySOL Standard Edition и MySQL Enterprise Edition.
- Ubuntu®: Ubuntu — это дистрибутив Linux, состоящий из свободного и открытого программного обеспечения и выпущенный в виде версий для настольных компьютеров, облака и Интернета вещей.

#### *По области применения:*
 -  **ОС мэйнфреймов** - больших компьютеров (mainframe os);
 -  **ОС серверов** (server os);
 - **ОС персональных компьютеров** (personal computer os);
 - **ОС мобильных устройств** (mobile os); встроенные ОС (embedded os) - система специального назначения, где компьютер полностью инкапсулирован в основное устройство. В отличие от компьютера общего назначения (например, ПК), встраиваемая система предназначена для решения одной или нескольких заранее определенных задач в конкретной предметной области (от МР3-плееров до интеллектуальных датчиков на электростанциях);
 - **ОС маршрутизаторов** (router os).

##### Основное - выполнение 6 функций, перечисленных выше.
*Кроме этого:*
- **расширяемость** - возможность приобретения системой новых функций в процессе эволюции; часто реализуется за счет добавления новых модулей;
- **переносимость**- возможность переноса операционной системы на другую аппаратную платформу с минимальными изменениями;
- **совместимость** - способность совместной работы; может иметь место совместимость новой версии операционной системы с приложениями, написанными для старой версии, или совместимость разных операционных систем в том смысле, что приложения для одной из этих систем можно запускать на другой и наоборот;
- **надежность** - вероятность безотказной работы системы;
- **производительность** - способность обеспечивать приемлемые время решения задач и время реакции системы.
<<<<<<< HEAD
>>>>>>> 1b888768bfa988e8d41057367e47513ed39a26e4
=======
---
## Режимы работы

Большинство ОС поддерживают двухуровневую систему привилегий:
- **режим ядра** (kernel mode);
- **пользовательский режим** (user mode).
﻿﻿
- В режиме ядра выполняются все разрешенные инструкции, доступна вся оперативная память и любые регистры. На время выполнения кода ОС микропроцессор переходит в режим ядра (привилегированный).

- В пользовательском режиме доступ к регистрам и памяти ограничен. Приложению не будет позволено работать с памятью за пределами набора адресов, установленного ОС, или обращаться напрямую к регистрам устройств.

- При таком подходе: легкость расширения системы, экономия ОП, возможность защиты от несанкционированного доступа к критически важным ресурсам системы.
---
## Модульность архитектуры ОC

Под **архитектурой** ОС обычно понимают структурную организацию ОС на основе программных модулей. Каждый модуль (часть ОС) имеет законченное функциональное назначение с четко оговоренными правилами взаимодействия. Современные ОС представляют собой хорошо структурированные модульные системы.

Единой архитектуры ОС не существует, но существуют универсальные подходы к структурированию ОС. Наиболее общим подходом к структуризации ОС является подразделение модулей две группы:
- **ядро ОС** (модули, выполняющие основные функции ОС);
- **окружение** (модули, выполняющие вспомогательные функции ОС).

Архитектура ОС, основанная на привилегированном ядре и приложениях пользовательского режима, является классической (применяется и в UNIX, и в
Windows).
<<<<<<< HEAD
=======

---
## Модули ядра ОС

**Резидентные**. Выполняют базовые функции ОС:
- **управление процессами;**
- **управление памятью;**
- **управление устройствами ввода-вывода.**

 Функции, входящие в состав ядра можно разделить на **два класса.**
 
  - **1 класс.** Для решения внутрисистемных задач организации вычислительного процесса (переключение контекстов процессов, загрузка/выгрузка страниц, обработка прерываний). Эти функции недоступны для приложений.
  
  - **2 класс.** Для поддержки приложений (доступны приложениям). Эти функции создают для приложений прикладную программную среду и образуют интерфейс прикладного программирования - АРІ. Приложения обращаются к ядру с запросами - системными вызовами. Функции API обслуживают системные вызовы - предоставляют доступ к ресурсам системы в удобной и компактной форме, без указания деталей их физического расположения.
---
## Вспомогательные модули ОС

**Транзитные**. Выполняют полезные, но менее обязательные функции; **архивации,** **дефрагментации** диска и т.п. Оформляются либо в виде приложений, либо в виде библиотек процедур и функций.

- Обычно подразделяются на следующие группы:
	- **утилиты** - программы, решающие отдельные задачи управления и сопровождения ВС (сжатие, дефрагментация ...);
	﻿﻿- **библиотеки процедур и функций** различного назначения (математических функций, функций ввода-вывода и т.д.);
	﻿﻿- **программы предоставления пользователю дополнительных услуг** - калькулятор, некоторые игры;
	﻿﻿- **системные обрабатывающие программы** - текстовые и графические редакторы, просмотрщики, компиляторы, компоновщики, отладчики.
---
## Взаимодействие между ядром и вспомогательными модулями ОС

![[Pasted image 20250911142646.png]]

---
# Монолитное ядро
﻿
﻿- Для монолитной ОС (monolithic kernel) ядро совпадает со **всей системой.**
﻿﻿
﻿﻿- Сборка ядра, то есть его **компиляция**, осуществляется отдельно для каждого компьютера, на который устанавливается ОС. При этом можно выбрать список оборудования и программных протоколов, поддержка которых будет включена в ядро
﻿﻿
﻿﻿- Так как ядро является единой программой, **перекомпиляция** - это единственный способ добавить в него новые компоненты или исключить неиспользуемые.
﻿﻿
- Присутствие в ядре лишних компонентов крайне нежелательно, так как ядро всегда полностью располагается в оперативной памяти. Кроме того, исключение ненужных компонентов повышает надежность операционной системы в целом.

# Микроядерная архитектура

- В микроядерной архитектуре (microkernel architecture) ОС большинство ее составляющих являются самостоятельными программами. В этом случае взаимодействие между ними обеспечивает специальный модуль ядра, называемый **микроядром**.
![[photo_2025-09-11_14-36-54.jpg]]
Высокая степень модульности и расширяемости, но накладные расходы связанные с передачей сообщений между ядром и окружением

# Гибридные системы

- Комбинации подходов, описанных выше, призванные уменьшить их недостатки и усилить Достоинства.

- Ядро ОС Linux - монолитная система с элементами микроядерной архитектуры. При компиляции ядра можно разрешить динамическую загрузку и выгрузку очень многих компонентов ядра.

- Ядро Windows - микроядерная архитектура со слишком большим (как монолитным) ядром, пример смешанной системы.

Статья о конфигурировании и компиляции ядра Linux
https://itproffi.ru/konfigurirovanie-i-kompilyatsiya-yadra-linux/
---
### Виды пользовательского интерфейса
﻿﻿- текстовый интерфейс (Text User Interface, TUI) - консольный, интерфейс командной строки;
﻿﻿- графический интерфейс (Graphic User Interface, GUI) - управление системой посредством визуальных компонент (кнопок, иконок, графических меню и т.п.).
﻿ 
﻿﻿- Пример текстового интерфейса - интерпретатор командной строки Windows cmd.exe, пример графического интерфейса - файловый менеджер Проводник.




---- 
### Понятие процесса #Леха 

﻿﻿С процессом связывается определённый программный код, который для этих целей оформляется в виде исполняемого модуля.

﻿﻿Процесс рассматривается операционной системой как заявка на потребление всех видов ресурсов, кроме одного- процессорного времени, распределяемого между другими единицами работы - потоками.

﻿﻿Для того чтобы процессы не могли вмешаться в распределение ресурсов, а также не могли повредить коды и данные друг друга, важнейшей задачей ОС является изоляция одного процесса от другого. Для этого ОС обеспечивает каждый процесс отдельным виртуальным адресным пространством, ни один процесс не может получить прямого доступа к командам и данным другого процесса.

---
## Состояния процесса. Общая модель

Для появления в вычислительной системе процесс должен пройти через состояние рождение. При завершении деятельности он попадает состояние закончил исполнение.


Более адекватная схема состояний процесса включает 5 состояний. Причем выйти из состояния может по трем причинам.

- ОС прекращает его деятельность;
- он не может продолжать работу, ожидая некоторое событие;
- в результате возникновения прерывания в ВС (например, от таймера по истечении предусмотренного времени выполнения) его возвращают в состояние готовность.

В конкретных ОС состояния процесса могут быть еще более детализированы. Так, например, модель состояний процессов для OWindows NT содержит 7 различных состояний, а для ОС Unix- 9.

---
### Операции над процессами

Процесс не может перейти. из одного состояния в другое самостоятельно.

Изменением состояния процессов занимается ОС, совершая операции над ними.

Удобно объединить их в три пары:
- создание процесса- завершение процесса;
- приостановка процесса (перевод из состояния исполнение в готовность) - запуск процесса (перевод из состояния готовность в состояние исполнение);
- блокирование процесса (перевод из состояния исполнение в ожидание) - разблокирование процесса (перевод из состояния ожидание в готовность).

В дальнейшем, в нашей модели появится еще одна операция, не имеющая парной: изменение приоритета процесса.
Операции создания и завершения процесса являются одноразовыми, остальные - могут применяться к процессам многократно.

---
### Process Control Block и контекст процесса

Для того чтобы ОС могла выполнять операции над процессами, каждый процесс представляется в ней некоторой структурой данных (назовём её РСВ). Эта структура содержит информацию, специфическую для данного процесса:
- состояние, в котором находится процесс;
- программный счетчик процесса или, другими словами, адрес команды, которая должна быть выполнена для него следующей;
- содержимое регистров процессора;
- данные, необходимые для планирования использования процессора и управления памятью (приоритет процесса, размер и расположение адресного пространства и т. д.);
- учетные данные (идентификационный номер процесса, какой пользователь инициировал его работу, общее время использования процессора данным процессом и т.д.);
- сведения об устройствах ввода-вывода, связанных с процессом (например, какие устройства закреплены за процессом, таблицу открытых файлов).

Любая операция, проводироиситемой напроцессом, вызывает определенные изменения в РСВ.

---
### Три контекста процесса
- Регистровый-отвечает за содержимое всех регистров процессора (включая значение программного счетчика).
- Пользовательский- это код и данные, находящиеся в адресном пространстве текущего процесса.
- Системный-все остальные составляющие РСВ (блока управления процессом).

Между изменениями состояний процессов, т.е. операциями над ними, содержимое РСВ остается постоянным. Совокупность з контекстов процесса: регистрового, системного и пользовательского для краткости принято называть просто контекстом.
В любой момент времени процесс полностью характеризуется своим контекстом.

---
### Одноразовые операции: создание

Инициатором рождения нового процесса после старта ОС может выступить либо процесс пользователя, совершивший специальный системный вызов, либо сама ОС.

Процесс, инициировавший создание нового, принято называть процессом-родителем (parent process), a вновь созданный процесс - процессом-ребенком (child process). Процессы-дети могут в свою очередь порождать новых детей и т. д., образуя, внутри системы набор генеалогических деревьев процессов.

При рождении процесса система заводит новый РСВ с состоянием процесса рождение и начинает его заполнять. Новый процесс получает собственный уникальный идентификационный номер (PID).

Поскольку для хранения PID процесса в ОС отводится ограниченное количество битов, количество одновременно присутствующих в ней процессов ограничено.

Для выполнения своих функций процесс-ребенок требует ресурсов: памяти, файлов, устройств вводе-вывода и т. д. Существует два подхода к их выделению: взять из родительских ресурсов или получить непосредственно от ОС. Unix поддерживает порождение только 1 способом, Windows - оба варианта.

---
### Переключение контекста

Деятельность мультипрограминой ОСсостоит из цепочек операций, выполняемых над процессами, и сопровождается переключением процессора с одного процесса на другой.

Torostocns

Выполнение операции разблокирования процесса 2 показано на рисунке слева.

Использование термина «код пользователя»

не ограничивает общности рисунка только пользовательскими процессами.

Для корректного переключения процессора с одного процесса на другой необходимо сохранить контекст исполнявшегося процесса и восстановить контекст процесса, на который будет переключен процессор.

Процедура сохранения/восстановления работоспособности процессов называется переключением контекста.

---
### Уровни планирования

﻿﻿Долгосрочное-отвечает за порождение новых процессов, определяя степень мультипрограммирования, т. е. число процессов, одновременно находящихся в системе. Межу появление овы роцесо могут проходит десятки минут.

﻿﻿Краткосрочное - планирование использования процессора. Проводится при обращении процесса к устройствам ввода-вывода, по завершении определенного интервала времени и т.д. Осуществляется не реже одного раза в 10 миллисекунд.

﻿﻿Среднесрочное-отвечает за перекачку (swapping) того или иного процесса на диск и обратно. Создано для разгрузки ОП и повышения производительности ВС.  
По времени занимает среднее значение по сравнению с предыдущими уровнями.

----
### Критерии планирования
- Справедливость - гарантировать каждому процессу определенную часть времени процессора.
- Эффективность - постараться занять процессор на все 100% рабочего времени, не позволяя ему простаивать. В реальных вычислительных системах загрузка процессора колеблется от 40 до 906.
- Сокращение полного времени выполнения (turaround time) - обеспечить минимальное время между стартом процесса или постановкой задания в очередь загрузки и его завершением.
- Сокращение времени ожидания (waiting time) - сократить время, проводимое в состоянии готовность.
- Сокращение времени отклика (response time) - минимизировать время ответа на запрос пользователя.

Дополнительные требования к алгоритмам планирования:
- Быть предсказуемыми. Однои то же задание должно выполняться приблизительно за одно время.
- Иметь минимальные накладные расходы. Если на каждые 100 миллисекунд, выделенные процессу, 200 миллисекунд уходит на переключение контекста, то такой алгоритм, очевидно, применять не стоит.
- Равномерно загружать ресурсы вычислительной системы, отдавая предпочтение тем процессам, которые будут занимать малоиспользуемые ресурсы.
- Обладать масштабируемостью, т. е. не сразу терять работоспособность при увеличении нагрузки.
---
### Параметры планирования

Все параметры планирования можно разбить на две большие группы: статические (неизменяемые в ходе выполнения) и динамические (изменяемые параметры).

К статическим параметрам ВС относят предельные значения ее ресурсов (размер ОП, ёмкость диска, размер области для свопинга, количество подключенных устройств ввода-вывода и т. п.), а также:
- Каким пользователем запущен процесс или сформировано задание.
- Насколько важной является задача, каков ее приоритет.
- Сколько процессорного времени запрошено для решения задачи.
- Каково соотношение процессорного времени и времени для операций вода-вывода.
- Какие ресурсы ВС и в каком количестве необходимы заданию.

Динамические параметры системы описывают количество свободных ресурсов на данный момент, а также:
- Сколько времени прошло с момента выгрузки процесса на диск или его загрузки в ОП
- Объём ОП, занимаемый процессом в текущий момент.
- Промежуток времени непрерывного использования процессора - CPU burst. 
- Промежуток бремени непрерывного ожидания ввода-вывода - 1/0 burst.
---
### Вытесняющее и невытесняющее планирование
Процесс планирования осуществляется частью называемой планировщиком, который принимает решения о выборе для исполнения нового процесса из числа находящихся в состоянии готовность в следующих четырех случаях:
1. Процесс переводится из состояния исполнение в закончил исполнение.
2. Процесс переводится из состояния исполнение в ожидание.
3. Процесс переводится из состояния исполнение в готовность (например, после прерывания от таймера).
4. Когда процесс переводится из состояния ожидание в готовность (например, завершилась операция ввода-вывода или произошло другое событие).
В случаях 1 и 2 процесс, находившийся в состоянии исполнение, не может дальше исполняться, и ос Вынуждена осуществлять планирование, выбирая новый. В случаях з и 4 планирование может как проводиться, так и не проводиться.
Если в ОС планирование осуществляется только в вынужденных ситуациях, то имеет место невытесняющее (nonpreemptive) планирование. Если принимаются и невынужденные решения, то говорят о вытесняющем (preemptive) планировании.

При небытесняющем планировании в случае зависания ВС из-за зацикливания программы единственное решение - перезагрузка всей системы. В вытесняющем работа построена на переключении к другому процессу по истечении некоторого интервала времени - кванта.